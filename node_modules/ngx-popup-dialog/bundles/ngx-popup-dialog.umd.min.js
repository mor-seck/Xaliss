!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/overlay"),require("@angular/core"),require("@angular/material/dialog"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ngx-popup-dialog",["exports","@angular/cdk/overlay","@angular/core","@angular/material/dialog","@angular/common","@angular/forms"],e):e(t["ngx-popup-dialog"]={},t.ng.cdk.overlay,t.ng.core,t.ng.material.dialog,t.ng.common,t.ng.forms)}(this,function(t,e,o,a,i,n){"use strict";var r=new o.InjectionToken("POPUP_DIALOG_CLOSE"),s=function(){function t(t,e,o){this.componentFactoryResolver=t,this.dialogRef=e,this.visible=!1,this.isOpened=!1,this.scaleBottomToTop=!1,this.scrollBoundedFunction=this.onScroll.bind(this),this.mouseDownHandled=!0,this.mouseUpHandled=!0,this.clickHandled=!0,this.config=o.config,this.data=o.data,this.direction=o.config.direction||getComputedStyle(this.config.triggeringElement).direction}return t.prototype.onScroll=function(t){this.positionDialogWhereTriggeringElement(),this.positionDialogUpIfBottomOutsideViewport()},t.prototype.onMouseDown=function(t){this.handleMouseEvent(t),this.mouseDownHandled=!0},t.prototype.onMouseUp=function(t){if(this.mouseDownHandled||this.clickHandled)return this.mouseDownHandled=!1,void(this.clickHandled=!1);this.handleMouseEvent(t),this.mouseUpHandled=!0},t.prototype.onClick=function(t){if(this.mouseDownHandled||this.mouseUpHandled)return this.mouseDownHandled=!1,void(this.mouseUpHandled=!1);this.handleMouseEvent(t),this.clickHandled=!0},t.prototype.handleMouseEvent=function(t){var e=this;if(this.isOpened&&this.lastClickedElement!=t.target){this.lastClickedElement=t.target,setTimeout(function(){e.lastClickedElement=null},200);var o=this.dialogContainerRef.nativeElement;if(o!==t.target&&!this.childOf(t.target,o)){if(this.config.suppressCloseOnClickSelectors)for(var i=0;i<this.config.suppressCloseOnClickSelectors.length;i++)for(var n=this.config.suppressCloseOnClickSelectors[i],r=document.querySelectorAll(n),s=0;s<r.length;s++){var a=r[s];if(a===t.target||this.childOf(t.target,a))return}this.closeDialog()}}},t.prototype.ngOnInit=function(){var e=this;this.registerOrUnregisterAncestrosScrollEvent(),this.loadComponent(),this.dialogRef.beforeClose().subscribe(function(t){e.visible=!1,e.isOpened=!1}),this.dialogRef.afterOpen().subscribe(function(t){e.isOpened=!0}),this.positionDialogWhereTriggeringElement(),this.positionDialogUpIfBottomOutsideViewport(),this.visible=!0},t.prototype.ngOnDestroy=function(){this.registerOrUnregisterAncestrosScrollEvent(!1)},t.prototype.loadComponent=function(){var t=this.componentFactoryResolver.resolveComponentFactory(this.config.component);this.popupContentViewContainer.clear();var e=o.ReflectiveInjector.resolveAndCreate([{provide:a.MAT_DIALOG_DATA,useValue:this.data||{}},{provide:r,useValue:this.closeDialog.bind(this)}]);this.popupContentViewContainer.createComponent(t,0,e)},t.prototype.containerTransitionEnd=function(t){t.target!=this.dialogContainerRef.nativeElement||this.visible||this.dialogRef.close(this.dialogResult)},t.prototype.closeDialog=function(t){this.dialogResult=t,this.visible=!1,this.isOpened=!1},t.prototype.registerOrUnregisterAncestrosScrollEvent=function(t){void 0===t&&(t=!0);for(var e=this.config.triggeringElement.parentNode;null!==e;)t?e.addEventListener("scroll",this.scrollBoundedFunction):e.removeEventListener("scroll",this.scrollBoundedFunction),e=e.parentNode},t.prototype.positionDialogWhereTriggeringElement=function(){var t=new a.MatDialogConfig,e=this.config.triggeringElement.getBoundingClientRect(),o=this.config.coverTriggeringElement?e.bottom-this.config.triggeringElement.offsetHeight-1:e.bottom;if(t.position={top:o+"px"},"rtl"==this.direction){var i=window.innerWidth-e.left-this.config.triggeringElement.offsetWidth;t.position.right=i+"px"}else t.position.left=e.left+"px";this.dialogRef.updatePosition(t.position)},t.prototype.positionDialogUpIfBottomOutsideViewport=function(){if(this.config.scaleToTopOnBottomOverflow){var t=this.dialogContainerRef.nativeElement,e=this.isOutOfViewport();if(e.bottom&&!e.topIfScaleToTop){this.scaleBottomToTop=!0;var o=new a.MatDialogConfig,i=t.getBoundingClientRect(),n=this.config.triggeringElement.offsetHeight,r=this.config.coverTriggeringElement?i.top-t.offsetHeight+n+1:i.top-t.offsetHeight-n;if(o.position={top:r+"px"},"rtl"==this.direction){var s=window.innerWidth-i.left-this.config.triggeringElement.offsetWidth;o.position.right=s+"px"}else o.position.left=i.left+"px";this.dialogRef.updatePosition(o.position)}else this.scaleBottomToTop=!1}},t.prototype.isOutOfViewport=function(){var t=this.dialogContainerRef.nativeElement,e=this.config.triggeringElement,o=t.getBoundingClientRect(),i=o.top;this.scaleBottomToTop&&(i=this.config.coverTriggeringElement?o.top-t.offsetHeight+e.offsetHeight:o.top-t.offsetHeight-e.offsetHeight);var n=i;this.scaleBottomToTop||(n=i-(this.config.coverTriggeringElement?t.offsetHeight-e.offsetHeight:t.offsetHeight+e.offsetHeight));var r={};return r.top=i<0,r.topIfScaleToTop=n<0,r.left=o.left<0,r.bottom=o.top+t.offsetHeight>(window.innerHeight||document.documentElement.offsetHeight),this.scaleBottomToTop&&!r.bottom&&(r.top||(r.bottom=!0)),r.right=o.left+t.offsetWidth>(window.innerWidth||document.documentElement.offsetWidth),r.any=r.top||r.left||r.bottom||r.right,r.all=r.top&&r.left&&r.bottom&&r.right,r},t.prototype.childOf=function(t,e){for(var o=t;null!==o;){if(o===e)return!0;o=o.parentNode}return!1},t.decorators=[{type:o.Component,args:[{selector:"popup-dialog",template:"<div #dialogContainer [attr.dir]=\"direction == 'rtl' ? 'rtl' : ''\" (transitionend)=\"containerTransitionEnd($event)\"\n class=\"ngx-popup-dialog-container\" [ngClass]=\"{'visible': visible, 'scale-to-top': scaleBottomToTop, 'rtl': direction == 'rtl'}\"\n [style.max-width]=\"config.maxWidth\" [style.max-height]=\"config.maxHeight\">\n  <ng-template #popupContent></ng-template>\n</div>\n",encapsulation:o.ViewEncapsulation.None,styles:[".ngx-popup-dialog-overlay{display:block}.ngx-popup-dialog-overlay .mat-dialog-container{display:inline;padding:0}.ngx-popup-dialog-container{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background:#fff;border-radius:2px;overflow:auto;transition:transform 150ms cubic-bezier(.4,0,1,1);transition:transform 150ms cubic-bezier(.4,0,1,1),-webkit-transform 150ms cubic-bezier(.4,0,1,1);-webkit-transform-origin:top left;transform-origin:top left;-webkit-transform:scale3d(0,0,1);transform:scale3d(0,0,1)}.ngx-popup-dialog-container.rtl{-webkit-transform-origin:top right;transform-origin:top right;direction:rtl}.ngx-popup-dialog-container.visible{transition:transform 150ms cubic-bezier(0,0,.2,1);transition:transform 150ms cubic-bezier(0,0,.2,1),-webkit-transform 150ms cubic-bezier(0,0,.2,1);-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}.ngx-popup-dialog-container.scale-to-top{-webkit-transform-origin:left bottom 0;transform-origin:left bottom 0}.ngx-popup-dialog-container.rtl.scale-to-top{-webkit-transform-origin:right bottom 0;transform-origin:right bottom 0}.ngx-popup-dialog-container::-webkit-scrollbar{width:6px;background-color:#f5f5f5}.ngx-popup-dialog-container::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#d9d9d9}"]}]}],t.ctorParameters=function(){return[{type:o.ComponentFactoryResolver},{type:a.MatDialogRef},{type:undefined,decorators:[{type:o.Inject,args:[a.MAT_DIALOG_DATA]}]}]},t.propDecorators={popupContentViewContainer:[{type:o.ViewChild,args:["popupContent",{read:o.ViewContainerRef}]}],dialogContainerRef:[{type:o.ViewChild,args:["dialogContainer"]}],onMouseDown:[{type:o.HostListener,args:["document:mousedown",["$event"]]}],onMouseUp:[{type:o.HostListener,args:["document:mouseup",["$event"]]}],onClick:[{type:o.HostListener,args:["document:click",["$event"]]}]},t}(),l=function(){return(l=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},p=function(){function t(t,e){this._overlay=t,this._dialogService=e}return t.prototype.open=function(t,e,o){o||(o={});var i=o.data;delete o.data;var n={config:l({},o,{component:t,triggeringElement:e,maxWidth:"number"==typeof o.maxWidth?o.maxWidth+"px":o.maxWidth,maxHeight:"number"==typeof o.maxHeight?o.maxHeight+"px":o.maxHeight,scaleToTopOnBottomOverflow:null==o.scaleToTopOnBottomOverflow||o.scaleToTopOnBottomOverflow,suppressCloseOnClickSelectors:"string"==typeof o.suppressCloseOnClickSelectors?[o.suppressCloseOnClickSelectors]:o.suppressCloseOnClickSelectors}),data:i},r={backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!1,scrollStrategy:this._overlay.scrollStrategies.noop(),panelClass:"ngx-popup-dialog-overlay",restoreFocus:!1,data:n};return this._dialogService.open(s,r)},t.decorators=[{type:o.Injectable}],t.ctorParameters=function(){return[{type:e.Overlay},{type:a.MatDialog}]},t}(),g=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[p]}},t.decorators=[{type:o.NgModule,args:[{declarations:[s],imports:[i.CommonModule,n.FormsModule,a.MatDialogModule],entryComponents:[s],exports:[]}]}],t}();t.NgxPopupDialogModule=g,t.PopupDialogService=p,t.POPUP_DIALOG_CLOSE=r,t.Éµa=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-popup-dialog.umd.min.js.map